<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Basic Calculator</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #282c34;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
  }
  .calculator {
    background: #1e2228;
    border-radius: 15px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.5);
    width: 320px;
    padding: 20px;
  }
  .display {
    background: #121518;
    color: #0fffc1;
    font-size: 2rem;
    height: 60px;
    border-radius: 10px;
    padding: 10px;
    text-align: right;
    overflow-x: auto;
    user-select: none;
  }
  .buttons {
    margin-top: 20px;
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 15px;
  }
  button {
    background: #2a2f36;
    border: none;
    border-radius: 10px;
    color: #fff;
    font-size: 1.4rem;
    padding: 15px;
    cursor: pointer;
    transition: background 0.3s, transform 0.1s;
    user-select: none;
  }
  button.operator {
    background: #0fffc1;
    color: #000;
    font-weight: bold;
  }
  button.clear {
    background: #ff4757;
  }
  button:active {
    transform: scale(0.95);
  }
  button:focus {
    outline: none;
    box-shadow: 0 0 8px #0fffc1;
  }
</style>
</head>
<body>

<div class="calculator" role="application" aria-label="Calculator">
  <div id="display" class="display" aria-live="polite" aria-atomic="true">0</div>
  <div class="buttons">
    <button class="clear" id="clear" aria-label="Clear">C</button>
    <button aria-label="Divide" class="operator" data-op="/">÷</button>
    <button aria-label="Multiply" class="operator" data-op="*">×</button>
    <button aria-label="Backspace" id="backspace">←</button>

    <button aria-label="7">7</button>
    <button aria-label="8">8</button>
    <button aria-label="9">9</button>
    <button aria-label="Subtract" class="operator" data-op="-">−</button>

    <button aria-label="4">4</button>
    <button aria-label="5">5</button>
    <button aria-label="6">6</button>
    <button aria-label="Add" class="operator" data-op="+">+</button>

    <button aria-label="1">1</button>
    <button aria-label="2">2</button>
    <button aria-label="3">3</button>
    <button id="equals" aria-label="Equals">=</button>

    <button aria-label="0" style="grid-column: span 2;">0</button>
    <button aria-label="Decimal point">.</button>
  </div>
</div>

<script>
  const display = document.getElementById('display');
  const buttons = document.querySelectorAll('.buttons button');
  let currentInput = '';
  let lastInput = '';
  
  function updateDisplay() {
    display.textContent = currentInput || '0';
  }
  
  function isOperator(char) {
    return ['+', '-', '*', '/'].includes(char);
  }
  
  function calculate(expression) {
    try {
      // Evaluate safely - replace × and ÷ with * and / already done by data-op
      const result = eval(expression);
      return result === Infinity || result === -Infinity ? 'Error' : result;
    } catch (e) {
      return 'Error';
    }
  }

  function handleButtonPress(value) {
    if (value === 'C') {
      currentInput = '';
    } else if (value === '←') {
      currentInput = currentInput.slice(0, -1);
    } else if (value === '=') {
      currentInput = calculate(currentInput).toString();
    } else if (isOperator(value)) {
      if (currentInput === '') return; // Don't start with operator
      if (isOperator(currentInput.slice(-1))) {
        currentInput = currentInput.slice(0, -1) + value; // Replace last operator
      } else {
        currentInput += value;
      }
    } else if (value === '.') {
      // Avoid multiple decimals in a number segment
      const parts = currentInput.split(/[\+\-\*\/]/);
      const lastNumber = parts[parts.length - 1];
      if (!lastNumber.includes('.')) {
        currentInput += value;
      }
    } else {
      currentInput += value;
    }
    updateDisplay();
  }

  buttons.forEach(button => {
    button.addEventListener('click', () => {
      let val = button.dataset.op || button.textContent;
      handleButtonPress(val);
    });
  });

  // Keyboard support
  window.addEventListener('keydown', (e) => {
    const allowedKeys = '0123456789+-*/.=';
    if (allowedKeys.includes(e.key)) {
      e.preventDefault();
      if (e.key === '=') {
        handleButtonPress('=');
      } else if (e.key === '.') {
        handleButtonPress('.');
      } else if (['+', '-', '*', '/'].includes(e.key)) {
        handleButtonPress(e.key);
      } else {
        handleButtonPress(e.key);
      }
    } else if (e.key === 'Enter') {
      e.preventDefault();
      handleButtonPress('=');
    } else if (e.key === 'Backspace') {
      e.preventDefault();
      handleButtonPress('←');
    } else if (e.key.toLowerCase() === 'c') {
      e.preventDefault();
      handleButtonPress('C');
    }
  });
</script>

</body>
</html>
